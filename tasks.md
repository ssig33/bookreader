# ブックリーダー 実装タスク

このファイルでは、ブックリーダーアプリケーションの実装状況を管理します。
READMEから抽出した機能一覧に基づいて、実装済みの機能にはチェックマーク（[x]）を、
未実装の機能には空のチェックボックス（[ ]）を付けています。

## 基本機能

- [x] Android/iPhone/Windowsで漫画を読むためのアプリケーション（基本構造）
- [x] zip/cbz/pdfを登録する（基本構造）
- [x] ファイルダイアログからファイルを選択して登録できる
- [x] D&Dでファイルを登録できる
- [x] 登録したファイルにタグをつけられる
- [x] タグで絞り込み検索ができる

## ファイル管理機能

- [x] アプリケーションのストレージ領域にファイルをコピーする
- [x] 一覧からファイルを削除できる
- [x] 一覧において、ファイルのリネームができる
- [x] ストレージ使用状況の確認と管理
- [x] ファイル追加時にページ数を取得して保存する（読書進捗管理のため）
- [ ] インテントでファイルを登録できる

## 閲覧機能（共通）

- [x] ファイルを開いてページ構造を表示できる（ダミー表示）
- [x] ページめくりができる
- [x] ページめくりの方向はファイルごとに設定できる
- [x] スワイプと左右クリックでページめくりができる
- [x] ファイルの上のほうをおすとメニュー
- [x] 一覧に戻る、めくり方向の変更、1ページだけ進む(見開き対応)ができる
- [ ] キーボードがあれば j で次のページ、k で前のページに移動できる
- [ ] Shift+Jで見開きだろうが1ページだけ進む
- [ ] Shift+Kで見開きだろうが1ページだけ戻る

## zip/cbzファイル処理

- [ ] zipファイルから画像を抽出して表示する
- [ ] 画像の順番を正しく並べ替える
- [ ] 画像アスペクト比とウィンドウアスペクト比をみて、それが可能そうであれば見開き表示をする

## PDFファイル処理

- [ ] PDFファイルからページを抽出して表示する
- [ ] PDFのページレンダリング品質を調整する
- [ ] PDFの見開き表示に対応する

## 実装済みのファイル

- `lib/models/book.dart` - 本のモデルクラス
- `lib/services/book_service.dart` - 本の管理サービス
- `lib/services/file_service.dart` - ファイル管理サービス
- `lib/widgets/book_list_item.dart` - 本の一覧アイテム表示ウィジェット
- `lib/screens/home_screen.dart` - ホーム画面（ファイル一覧画面）
- `lib/screens/reader_screen.dart` - 閲覧画面（ページめくり、メニュー表示、読み方向切り替え）
- `lib/screens/storage_info_screen.dart` - ストレージ情報画面

## 次のステップ

1. ファイル形式別の実装
   - zip/cbzファイルの画像抽出と表示機能
   - PDFファイルのページ抽出と表示機能

2. ファイル管理の改善
   - ✓ ファイル追加時のページ数取得と保存機能
   - ✓ 読書進捗状況の表示機能（例：「10/50ページ」）

3. 閲覧機能の強化
   - zip/cbzファイルの見開き表示機能
   - PDFファイルの見開き表示機能
   - キーボードショートカット対応

4. その他の機能
   - インテントによるファイル登録機能
   - データの永続化の改善